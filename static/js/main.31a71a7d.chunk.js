(window["webpackJsonpgotham-social"]=window["webpackJsonpgotham-social"]||[]).push([[0],{120:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(31),a=n(11);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return{type:"SEND_MESSAGE",message:e}},i={dialogsItems:[{id:1,name:"Ira"},{id:2,name:"Dima"},{id:3,name:"Vasya"},{id:4,name:"Sveta"},{id:5,name:"Pasha"}],messagesData:[{id:1,message:"Hello. How are you?"},{id:2,message:"I'm fine, workin on big research!"}]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return c({},e,{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:e.messagesData.length+1,message:t.message}])});default:return e}}},124:function(e,t,n){"use strict";var r=n(31),a=n(11),o=n(8),c=n.n(o),u=n(19),i=n(15);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e,t,n,r){return e.map((function(e){return e[n]===t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},r):e}))};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return w}));var d={users:[],pageSize:10,totalCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},b=function(e){return{type:"FOLLOW",userId:e}},O=function(e){return{type:"UNFOLLOW",userId:e}},m=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},g=function(e){return{type:"TOGGLE_FETCHING",isFetching:e}},h=function(e,t){return{type:"TOGGLE_FOLLOWING_IN_PROGRESS",inProgress:e,userId:t}},y=function(e,t){return function(){var n=Object(u.a)(c.a.mark((function n(r){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(g(!0)),n.next=3,i.c.getUsers(e,t);case 3:a=n.sent,r({type:"SET_USERS",users:a.items}),r({type:"SET_TOTAL_COUNT",totalCount:a.totalCount}),r(g(!1)),r(m(e));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=function(){var e=Object(u.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(h(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(h(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),v=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,i.c.followUser.bind(i.c),b);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,i.c.unfollowUser.bind(i.c),O);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return p({},e,{users:l(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return p({},e,{users:l(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return p({},e,{users:Object(r.a)(t.users)});case"SET_CURRENT_PAGE":return p({},e,{currentPage:t.currentPage});case"SET_TOTAL_COUNT":return p({},e,{totalCount:t.totalCount});case"TOGGLE_FETCHING":return p({},e,{isFetching:t.isFetching});case"TOGGLE_FOLLOWING_IN_PROGRESS":return p({},e,{followingInProgress:t.inProgress?[].concat(Object(r.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},126:function(e,t,n){e.exports={loginError:"LoginForm_loginError__1hSHv"}},130:function(e,t,n){e.exports=n.p+"static/media/Eclipse.6e733990.svg"},131:function(e,t,n){e.exports=n.p+"static/media/logo.02322427.png"},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(129),a=n.n(r).a.create({withCredentials:!0,headers:{"API-KEY":"9c15a2ea-096a-4cc8-b29a-5f06081fa85f"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),o={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return a.post("follow/".concat(e))},unfollowUser:function(e){return a.delete("follow/".concat(e))}},c={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e))},updateStatus:function(e){return a.put("profile/status/",{status:e})}},u={getAuthUserData:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,remember:n}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))}}},159:function(e,t,n){e.exports=n(285)},164:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(60),c=n.n(o),u=(n(164),n(45)),i=n(46),s=n(49),l=n(47),f=n(50),p=n(10),d=function(){return a.a.createElement("div",{className:"navbar"},a.a.createElement("nav",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(p.b,{to:"/profile"},"Profile"),a.a.createElement(p.b,{to:"/dialogs"},"Messages"),a.a.createElement(p.b,{to:"/users"},"Users"),a.a.createElement(p.b,{to:"/news"},"News"),a.a.createElement(p.b,{to:"/music"},"Music"),a.a.createElement(p.b,{to:"/settings"},"Settings")))},b=n(28),O=n(121),m=n(122),g=n(68),h=n(69),y=n(126),E=n.n(y),v=Object(m.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,a.a.createElement(O.a,{name:"email",placeholder:"Email",component:g.a,validate:[h.b]})),a.a.createElement("div",null,a.a.createElement(O.a,{name:"password",placeholder:"Password",component:g.a,validate:[h.b]})),n&&a.a.createElement("div",{className:E.a.loginError},"Incorrect email or password"),a.a.createElement("div",null,a.a.createElement(O.a,{name:"rememberMe",component:"input",type:"checkbox"})),a.a.createElement("div",null,a.a.createElement("button",null,"Log in")))})),w=function(e){var t=e.login;return e.isAuth?a.a.createElement(b.a,{to:"/profile"}):a.a.createElement(v,{onSubmit:function(e){t(e.email,e.password,e.rememberMe)}})},j=n(8),P=n.n(j),S=n(19),_=n(11),D=n(15),I=n(48);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(_.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="gotham-social/auth/SET_USER_DATA",L={id:null,email:null,login:null,isFetching:!1,isAuth:!1},N=function(e){return{type:x,payload:e}},A=function(){return function(e){return D.a.getAuthUserData().then((function(t){0===t.resultCode&&e(N(k({},t.data,{isAuth:!0})))}))}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return k({},e,{},t.payload);default:return e}},C=n(18),G={login:function(e,t,n){return function(){var r=Object(S.a)(P.a.mark((function r(a){var o;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D.a.login(e,t,n);case 2:o=r.sent,r.t0=o.resultCode,r.next=0===r.t0?6:1===r.t0?8:10;break;case 6:return a(A()),r.abrupt("break",11);case 8:return a(Object(I.a)("login",{_error:o.messages[0]})),r.abrupt("break",11);case 10:return r.abrupt("break",11);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},F=Object(C.b)((function(e){return{isAuth:e.auth.isAuth}}),G)(w),R=n(59),H=a.a.lazy((function(){return n.e(5).then(n.bind(null,296))})),M=a.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),z=a.a.lazy((function(){return n.e(4).then(n.bind(null,297))})),W=Object(b.f)((function(){return a.a.createElement("div",{className:"content"},a.a.createElement(r.Suspense,{fallback:R.a},a.a.createElement(b.b,{path:"/profile/:userId?",render:function(){return a.a.createElement(M,null)}}),a.a.createElement(b.b,{path:"/dialogs",render:function(){return a.a.createElement(H,null)}}),a.a.createElement(b.b,{path:"/users",render:function(){return a.a.createElement(z,null)}}),a.a.createElement(b.b,{path:"/login",render:function(){return a.a.createElement(F,null)}})))})),J=n(131),V=n.n(J),Z=n(37),q=n.n(Z),B=function(e){var t=e.isAuth,n=e.login,r=e.logout;return a.a.createElement("header",{className:"header ".concat(q.a.header)},a.a.createElement("div",{className:q.a.logo},a.a.createElement("img",{src:V.a,alt:"logo",className:q.a.logoImage})),a.a.createElement("div",{className:q.a.userMenu},t?a.a.createElement("div",null,a.a.createElement("div",null,n),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){r()}},"Logout"))):a.a.createElement(p.c,{className:q.a.loginLink,to:"/login"},"Login")))},X=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement(B,this.props)}}]),t}(a.a.Component),K={logout:function(){return function(){var e=Object(S.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.logout();case 2:0===e.sent.resultCode&&t(N({id:null,login:null,password:null,email:null,isAuth:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Y=Object(C.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,login:t.login}}),K)(X);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(_.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={initialized:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZING_SUCCES":return Q({},e,{initialized:!0});default:return e}},ne=n(7),re=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.initializeApp)()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"wrapper"},a.a.createElement(Y,null),a.a.createElement(d,null),a.a.createElement(W,null)):a.a.createElement(R.a,null)}}]),t}(a.a.Component),ae=Object(ne.d)(b.f,Object(C.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(A());Promise.all([t]).then((function(){e({type:"INITIALIZING_SUCCES"})}))}}}))(re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=n(89),ce=n(120),ue=n(124),ie=n(132),se=n(123),le=Object(ne.c)({profilePage:oe.b,dialogsPage:ce.a,users:ue.a,auth:U,form:se.a,app:te}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d,pe=Object(ne.e)(le,fe(Object(ne.a)(ie.a)));window.store=pe;var de=pe;c.a.render(a.a.createElement(p.a,null,a.a.createElement(C.a,{store:de},a.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,n){e.exports={header:"Header_header__1ww3b",logo:"Header_logo__2ENmT",logoImage:"Header_logoImage__1xqwI",userMenu:"Header_userMenu__1V_Hs",loginLink:"Header_loginLink__1ifZs"}},59:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(130),c=n.n(o);t.a=function(){return a.a.createElement("div",null,a.a.createElement("img",{src:c.a,alt:"preloader"}))}},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n(11),a=n(133),o=n(0),c=n.n(o),u=n(85),i=n.n(u);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e,t){var n=t.input,o=t.meta,u=Object(a.a)(t,["input","meta"]),l=o.touched&&o.error;u.className=l&&i.a.error?i.a.error:"";var f=e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},u));return c.a.createElement("div",null,f,l&&c.a.createElement("span",null,o.error))},f=function(e){return l((function(e){return c.a.createElement("textarea",e)}),e)},p=function(e){return l((function(e){return c.a.createElement("input",e)}),e)}},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is requeired"},a=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},85:function(e,t,n){e.exports={error:"FormFields_error__fUAJH"}},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return g}));var r=n(31),a=n(11),o=n(8),c=n.n(o),u=n(19),i=n(15);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={posts:[{id:1,text:"Hello world",likes:15},{id:2,text:"What's up?",likes:10}],profile:null,newPostText:"",status:""},p=function(e){return{type:"ADD_POST",text:e}},d=function(e){return{type:"SET_USER_PROFILE",profile:e}},b=function(e){return{type:"SET_STATUS",status:e}},O=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getProfile(e);case 2:r=t.sent,n(d(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(b(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(b(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:e.posts.length+1,text:t.text,likes:0};return l({},e,{posts:[].concat(Object(r.a)(e.posts),[n])});case"DELETE_POST":return l({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"SET_USER_PROFILE":return l({},e,{profile:t.profile});case"SET_STATUS":return l({},e,{status:t.status});default:return e}}}},[[159,1,2]]]);
//# sourceMappingURL=main.31a71a7d.chunk.js.map